<%= render "shared/header" %>

<div class="article-show">
  <div class="article-info">
    <h1 class="article-title">タイトル：<%= @post.title %></h1>
    <div class="article-image">
      <%= image_tag @post.image.variant(resize: '500x500') if @post.image.attached? %>
    </div>
    <div class="article-text">本文：<%= @post.text %></div>
    <div class="post-user">
      投稿者：<%= link_to @post.user.nickname, user_path(@post.user.id) %>
    </div>
    <div class="article-theme">テーマ：<%= @post.theme.name %></div>
  </div>

  <% if user_signed_in? && current_user.id == @post.user.id %>
    <%= link_to '編集', edit_post_path(@post.id) %>
    <%= link_to '削除', post_path(@post.id), method: :delete %>
  <% end %>

  <div class="comments-form">
    <% if user_signed_in? %>
      <%= form_with(model: [@post, @comment], local: true) do |f| %>
        <%= f.text_area :text, placeholder: "コメントする" %>
        <%= f.submit "SEND" %>
      <% end %>
    <% else %>
      <strong><p>＊コメント投稿には新規登録/ログインが必要です＊</p></strong>
    <% end %>
  </div>

  <div class="comments">
    <h4>＜コメント一覧＞</h4>
    <% @comments.each do |comment| %>
      <p>
        <strong><%= link_to comment.user.nickname, user_path(comment.user_id) %>：</strong>
        <%= comment.text %>
      </p>
    <% end %>
  </div>
</div>

<%= link_to "戻る", :back %>